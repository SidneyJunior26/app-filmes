{"ast":null,"code":"import { __decorate, __metadata } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { FormBuilder } from '@angular/forms';\nimport { FilmesService } from 'src/app/core/filmes.service';\nlet ListagemFilmesComponent = class ListagemFilmesComponent {\n  constructor(service, fb) {\n    this.service = service;\n    this.fb = fb;\n    this.semFoto = 'https://triunfo.pe.gov.br/pm_tr430/wp-content/uploads/2018/03/sem-foto.jpg';\n    this.config = {\n      pagina: 0,\n      limite: 6\n    };\n    this.filmes = [];\n  }\n\n  ngOnInit() {\n    this.filtroListagem = this.fb.group({\n      texto: [''],\n      genero: ['']\n    });\n    this.filtroListagem.get('texto').valueChanges.subscribe(val => {\n      this.config.pesquisa = val;\n      this.resetarConsulta();\n    });\n    this.filtroListagem.get('genero').valueChanges.subscribe(val => {\n      this.config.campo = {\n        tipo: 'genero',\n        valor: val\n      };\n      this.resetarConsulta();\n    });\n    this.generos = ['Ação', 'Comédia', 'Romance', 'Drama', 'Aventura', 'Terror', 'Ficção Cientifica'];\n    this.listarFilmes();\n  }\n\n  onScroll() {\n    this.listarFilmes();\n  }\n\n  listarFilmes() {\n    this.config.pagina++;\n    this.service.listar(this.config).subscribe(filmes => this.filmes.push(...filmes));\n  }\n\n  resetarConsulta() {\n    this.config.pagina = 0;\n    this.filmes = [];\n    this.listarFilmes();\n  }\n\n};\nListagemFilmesComponent = __decorate([Component({\n  selector: 'app-listagem-filmes',\n  templateUrl: './listagem-filmes.component.html',\n  styleUrls: ['./listagem-filmes.component.scss']\n}), __metadata(\"design:paramtypes\", [FilmesService, FormBuilder])], ListagemFilmesComponent);\nexport { ListagemFilmesComponent };","map":null,"metadata":{},"sourceType":"module"}